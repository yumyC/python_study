# 项目3: 文件管理器

## 项目简介

这是一个功能完整的命令行文件管理器，支持文件和目录的各种操作，包括创建、删除、复制、移动、搜索等。

## 功能特性

- ✅ 列出目录：显示文件和目录列表，包含大小和修改时间
- ✅ 创建文件：创建新文件并写入内容
- ✅ 创建目录：创建新目录（支持多级）
- ✅ 删除文件：删除指定文件
- ✅ 删除目录：删除目录及其所有内容
- ✅ 复制文件：复制文件到新位置
- ✅ 移动文件：移动或重命名文件
- ✅ 文件信息：查看详细的文件信息
- ✅ 搜索文件：在当前目录及子目录中搜索
- ✅ 读取文件：显示文本文件内容
- ✅ 切换目录：在目录间导航

## 运行说明

### 前置要求

- Python 3.6 或更高版本

### 运行程序

```bash
python file_manager.py
```

### 安全提示

⚠️ **注意**: 此程序可以删除文件和目录，请谨慎操作！
- 删除操作会要求确认
- 建议在测试目录中运行
- 重要文件请提前备份

## 使用方法

1. 运行程序后，会显示当前目录
2. 选择相应的操作编号
3. 根据提示输入信息
4. 使用 "切换目录" 功能在不同目录间导航

## 示例操作

```
欢迎使用文件管理器！
当前目录: /home/user/projects

==================================================
文件管理器
==================================================
1. 列出目录内容
2. 创建文件
3. 创建目录
...
==================================================
请选择操作 (0-11): 1

======================================================================
目录: /home/user/projects
======================================================================
类型     名称                           大小            修改时间            
----------------------------------------------------------------------
[目录]   test_folder                    -               2024-01-01 10:00:00
[文件]   example.txt                    1.23 KB         2024-01-01 11:00:00
======================================================================
```

## 代码结构

```
project3_file_manager/
├── file_manager.py  # 主程序文件
└── README.md        # 项目说明文档
```

## 核心代码说明

### FileManager 类

```python
class FileManager:
    def __init__(self):
        self.current_path = Path.cwd()  # 当前工作目录
    
    def list_directory(self, path=None):
        # 列出目录内容，显示文件类型、大小、修改时间
        pass
    
    def create_file(self, filename, content=""):
        # 创建文件并写入内容
        pass
    
    def delete_file(self, filename):
        # 删除文件（带安全检查）
        pass
```

### 使用 pathlib

程序使用现代的 `pathlib` 模块进行路径操作：
- `Path.cwd()`: 获取当前目录
- `Path.exists()`: 检查路径是否存在
- `Path.is_file()`: 检查是否为文件
- `Path.is_dir()`: 检查是否为目录
- `Path.stat()`: 获取文件统计信息

### 文件大小格式化

```python
def _format_size(size):
    """将字节转换为人类可读的格式"""
    for unit in ['B', 'KB', 'MB', 'GB', 'TB']:
        if size < 1024.0:
            return f"{size:.2f} {unit}"
        size /= 1024.0
```

## 学习要点

### 1. 文件系统操作
- 使用 pathlib 进行路径操作
- 文件和目录的创建、删除
- 文件复制和移动
- 获取文件信息

### 2. 模块使用
- `pathlib`: 现代路径操作
- `os`: 操作系统接口
- `shutil`: 高级文件操作
- `datetime`: 时间格式化

### 3. 错误处理
- 检查文件/目录是否存在
- 处理权限错误
- 处理编码错误
- 用户确认机制

### 4. 用户体验
- 格式化输出（表格）
- 文件大小人性化显示
- 相对路径和绝对路径
- 递归搜索

## 功能详解

### 1. 列出目录内容
- 按类型排序（目录在前）
- 显示文件大小（格式化）
- 显示修改时间
- 区分文件和目录

### 2. 创建文件
- 检查文件是否已存在
- 支持写入初始内容
- 自动处理编码

### 3. 删除操作
- 要求用户确认
- 区分文件和目录删除
- 目录删除会递归删除所有内容

### 4. 搜索文件
- 支持模糊搜索
- 递归搜索子目录
- 显示相对路径

### 5. 文件信息
- 文件名和路径
- 文件类型和大小
- 创建、修改、访问时间
- 文件扩展名

## 扩展练习

### 初级扩展
1. 添加文件重命名功能
2. 支持批量操作
3. 添加文件压缩/解压

### 中级扩展
1. 实现文件内容搜索（grep）
2. 添加文件权限管理
3. 支持文件比较
4. 添加回收站功能

### 高级扩展
1. 实现图形界面
2. 添加文件监控功能
3. 支持远程文件操作（FTP/SFTP）
4. 实现文件同步功能

## 常见问题

### Q: 删除的文件可以恢复吗？
A: 不能，删除是永久性的。建议在删除前确认，或实现回收站功能

### Q: 可以操作系统文件吗？
A: 可以，但需要相应的权限。建议只在自己的目录中操作

### Q: 支持哪些文件类型？
A: 支持所有文件类型，但读取内容功能只适用于文本文件

### Q: 如何返回上级目录？
A: 使用 "切换目录" 功能，输入 ".."

## 安全建议

1. **谨慎删除**: 删除操作不可恢复
2. **备份重要文件**: 操作前备份
3. **测试环境**: 在测试目录中练习
4. **权限检查**: 注意文件权限
5. **路径验证**: 确认操作路径正确

## 相关知识点

- pathlib 模块
- os 模块
- shutil 模块
- 文件 I/O
- 异常处理
- 字符串格式化
- 日期时间处理
- 递归操作

## 实际应用

这个文件管理器的技术可以应用于：
- 批量文件处理脚本
- 文件备份工具
- 日志文件管理
- 项目文件组织
- 自动化部署脚本

## 下一步

完成这个项目后，可以继续学习：
- [项目1: 计算器](../project1_calculator/)
- [项目2: 待办事项列表](../project2_todo_list/)
- 学习正则表达式进行高级文件搜索
- 学习多线程处理大量文件
