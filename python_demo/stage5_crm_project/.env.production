# CRM 项目生产环境配置模板
# 注意: 请根据实际环境修改这些值，并确保敏感信息的安全性

# ================================
# 应用基础配置
# ================================
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# 应用密钥 (请使用强随机密钥)
SECRET_KEY=your-super-secret-key-change-this-in-production

# 应用域名
DOMAIN=your-domain.com
ALLOWED_HOSTS=your-domain.com,www.your-domain.com

# ================================
# 数据库配置
# ================================
# PostgreSQL 主数据库
DATABASE_URL=postgresql://crm_user:strong_password@postgres:5432/crm_db
POSTGRES_DB=crm_db
POSTGRES_USER=crm_user
POSTGRES_PASSWORD=strong_password_change_this

# 数据库连接池配置
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ================================
# Redis 配置
# ================================
REDIS_URL=redis://:redis_password@redis:6379/0
REDIS_PASSWORD=redis_password_change_this
REDIS_MAX_CONNECTIONS=50

# ================================
# Celery 异步任务配置
# ================================
CELERY_BROKER_URL=redis://:redis_password@redis:6379/1
CELERY_RESULT_BACKEND=redis://:redis_password@redis:6379/2
CELERY_WORKER_CONCURRENCY=4
CELERY_TASK_SOFT_TIME_LIMIT=300
CELERY_TASK_TIME_LIMIT=600

# ================================
# 文件存储配置
# ================================
# 本地存储
UPLOAD_PATH=/app/uploads
MAX_UPLOAD_SIZE=50MB

# 云存储 (可选)
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_STORAGE_BUCKET_NAME=your_bucket_name
# AWS_S3_REGION_NAME=us-east-1

# ================================
# 邮件配置
# ================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_email_password
SMTP_TLS=true
FROM_EMAIL=noreply@your-domain.com

# ================================
# JWT 认证配置
# ================================
JWT_SECRET_KEY=jwt-secret-key-change-this
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ALGORITHM=HS256

# ================================
# 安全配置
# ================================
# CORS 配置
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com
CORS_ALLOW_CREDENTIALS=true

# 密码策略
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=true

# 会话配置
SESSION_TIMEOUT=3600
MAX_LOGIN_ATTEMPTS=5
LOGIN_LOCKOUT_DURATION=900

# ================================
# 监控配置
# ================================
# Prometheus 监控
PROMETHEUS_ENABLED=true
METRICS_ENDPOINT=/metrics

# Grafana 配置
GRAFANA_USER=admin
GRAFANA_PASSWORD=secure_grafana_password

# Flower 监控 (Celery)
FLOWER_USER=admin
FLOWER_PASSWORD=secure_flower_password

# ================================
# 日志配置
# ================================
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=10

# 结构化日志
STRUCTURED_LOGGING=true
LOG_REQUEST_ID=true

# ================================
# 缓存配置
# ================================
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=crm:

# ================================
# 限流配置
# ================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=100/hour
RATE_LIMIT_LOGIN=5/minute
RATE_LIMIT_API=1000/hour

# ================================
# Docker 配置
# ================================
DOCKER_USERNAME=your_docker_username
DOCKER_IMAGE_TAG=latest

# ================================
# 备份配置
# ================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # 每天凌晨 2 点
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket

# ================================
# 第三方服务配置
# ================================
# 短信服务 (可选)
# SMS_PROVIDER=aliyun
# SMS_ACCESS_KEY=your_sms_access_key
# SMS_SECRET_KEY=your_sms_secret_key

# 支付服务 (可选)
# PAYMENT_PROVIDER=stripe
# STRIPE_PUBLIC_KEY=pk_live_...
# STRIPE_SECRET_KEY=sk_live_...

# ================================
# 性能优化配置
# ================================
# 数据库查询优化
DB_QUERY_TIMEOUT=30
DB_SLOW_QUERY_THRESHOLD=1.0

# HTTP 配置
HTTP_TIMEOUT=30
HTTP_MAX_CONNECTIONS=100
HTTP_KEEPALIVE_TIMEOUT=5

# 静态文件配置
STATIC_FILE_CACHE_TIMEOUT=31536000  # 1 年
STATIC_FILE_COMPRESSION=true

# ================================
# 开发和调试配置 (生产环境应禁用)
# ================================
# 调试模式 (生产环境必须为 false)
DEBUG_MODE=false
PROFILING_ENABLED=false

# API 文档 (生产环境可选择禁用)
API_DOCS_ENABLED=false
SWAGGER_UI_ENABLED=false

# ================================
# 健康检查配置
# ================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_TIMEOUT=10

# 依赖服务健康检查
CHECK_DATABASE=true
CHECK_REDIS=true
CHECK_EXTERNAL_APIS=true

# ================================
# 特性开关
# ================================
# 功能特性开关
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_TWO_FACTOR_AUTH=false
FEATURE_AUDIT_LOG=true
FEATURE_DATA_EXPORT=true

# 实验性功能
EXPERIMENTAL_FEATURES=false

# ================================
# 国际化配置
# ================================
DEFAULT_LANGUAGE=zh-CN
SUPPORTED_LANGUAGES=zh-CN,en-US
TIMEZONE=Asia/Shanghai

# ================================
# 合规性配置
# ================================
# GDPR 合规
GDPR_ENABLED=false
DATA_RETENTION_DAYS=2555  # 7 年

# 审计日志
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555